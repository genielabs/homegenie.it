
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="HomeGenie Automation Programs Plugins, languages and SDK">
    <meta name="keywords" content="homegeniedocumentationprogrammingsdkappprogram editorcsharpjavascriptpythonvirtual modules" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programs (APP)</title>
    <link rel="author" href="humans.txt" />
    <link rel="alternate" type="application/rss+xml"
          title="RSS Feed for Programs (APP)"
          href="/feed/rss.xml" />

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Progressive Web App -->
    <meta name="theme-color" content="white">
    <link rel="manifest" href="/manifest.json">

    <!-- Add to home screen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/images/icons/desktop/android-chrome-192x192.png">
    <link rel="icon" sizes="512x512" href="/images/icons/desktop/android-chrome-512x512.png">

    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="A zUIx website">
    <link rel="apple-touch-icon-precomposed" href="/images/icons/desktop/apple-touch-icon.png">
    <link rel="mask-icon" href="/images/icons/desktop/safari-pinned-tab.svg" color="#5bbad5">

    <!-- Tile color for Windows -->
    <meta name="msapplication-TileImage" content="/images/icons/desktop/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#ffc40d">

    <!-- Place favicon.ico in the root directory -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/desktop/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/desktop/favicon-16x16.png">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="https://www.example.com/">
    -->

    <link rel="preload" as="style" href="/css/fla/flex-layout-attribute.min.css" />
    <link rel="stylesheet" href="/css/fla/flex-layout-attribute.min.css" />
    <link rel="preload" as="style" href="/css/animate.min.css" />
    <link rel="stylesheet" href="/css/animate.min.css" />

    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="">
    <link rel="preload" as="style" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">


  
    <link rel="preload" as="style" href="/js/mdl/material.indigo-deep_purple.min.css">
    <link rel="stylesheet" href="/js/mdl/material.indigo-deep_purple.min.css">
  
    <link rel="preload" as="script" href="/js/mdl/material.min.js">
    <script src="/js/mdl/material.min.js"></script>



    <link rel="preload" as="style" href="/css/prism.css" />
    <link rel="stylesheet" href="/css/prism.css" />


    <!-- zuix.js https://github.com/zuixjs/zuix -->
    <link rel="preload" as="script" href="/js/zuix/zuix.min.js">
    <link rel="preload" as="script" href="/config.js">
    <script src="/js/zuix/zuix.min.js"></script>
    <script src="/config.js"></script>

<style>
    :root {
        --primary-color: #1d68a8; /* rgb(63,81,181) */
        --accent-color: rgb(124,77,255);
        --background-color: unset;
    }

    body {
        margin: 0;
        padding: 0;
        font-size: 14px;
        position: relative;
        min-height: 100vh;
        background: var(--background-color);
    }

    a {
        text-decoration: none;
    }
    a[name] {
        position: relative;
        top: -48px;
    }
    /* prevents links dragging */
    a, a::after, a::before {
        -webkit-user-drag: none;
        -webkit-app-region: no-drag;
    }

    img {
        max-width: 100%;
    }

    h1 {
        font-size: 230% !important;
        font-weight: 500;
    }
    h1.title {
        margin:0;
        padding-right: 48px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
    }
    h2 {
        font-size: 220% !important;
        color: var(--primary-color);
    }
    h3 {
        font-size: 190% !important;
        opacity: 0.9;
    }
    h4 {
        font-size: 160% !important;
        opacity: 0.8;
    }
    h5 {
        font-size: 150% !important;
        opacity: 0.7;
    }
    h6 {
        font-size: 130% !important;
        opacity: 0.6;
    }

    ul {
        margin-bottom: 24px;
    }

    li {
        margin-top: 4px;
        margin-bottom: 4px;
        font-size: 120%;
    }
    li small {
        font-family: Helvetica, sans-serif;
        font-size: 70%;
        font-weight: 600;
        margin-left: 6px;
        text-transform: uppercase;
        opacity: 0.5;
    }

    blockquote {
        font-size: 140%;
        opacity: 0.6;
    }

    p {
        font-size: 130%;
        line-height: 160%;
        margin-bottom: 24px;
    }

    hr {
        margin-bottom: 30px;
    }

    code[class*=language-], pre[class*=language-] {
        font-size: 115%;
    }
    pre:not([class*="language-"]) {
        width: 100%;
        max-width: 100%;
        overflow-x: auto;
    }

    pre[class*="language-"]{
        margin-top: 32px!important;
        margin-bottom: 32px!important;
    }
    code {
        color: #0b4d2c;
        overflow-wrap: break-word; /* for old browsers */
        overflow-wrap: anywhere;
    }

    main {
        min-height: 100vh;
        width: 100% !important;
        padding: 0 !important;
        transition: padding-left 150ms ease-in-out;
    }
    main div.content {
        width: 100% !important;
        max-width: 960px !important;
        padding-top: 24px;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    main h2:first-child  {
        margin-top: 72px!important;
    }
    main h2:not(:first-child)  {
        margin-top: 64px;
    }
    main h3 {
        margin-top: 56px;
        margin-bottom: 16px;
    }

    [\#header] {
        position: fixed;
        z-index: 1;
        top:0; left: 0; right: 0; bottom: 0;
        height: 64px;
        padding-left: 8px;
        padding-right: 8px;
        background: #f1f1f1;
        box-shadow: 0 1px rgba(100, 100, 100, 30%);
    }
    h1[\#alt_header] {
        max-width: 100%;
        text-align: center;
        display: block;
        padding: 10px 56px 24px !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    nav, nav a {
        color: black!important;
    }
    footer {
        background: transparent!important;
        box-shadow: none!important;
    }
    footer, footer a {
        color: black!important;
    }

    .header-menu-button {
        cursor: pointer;
        height: 48px!important;
        width: 48px!important;
    }
    .header-menu-button i {
        color: black;
        font-size: 32px!important;
        left: 20px!important;
    }


    .download-button {
        height:120px;
        margin:8px;
        max-width: 380px;
        gap: 12px;
        padding: 12px;
        border-radius: 8px;
    }
    .download-button h3 {
        margin:0;
        font-size: 160% !important;
    }
    .download-button span {
        text-transform:none;
    }
    .media-container {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 24px;
        max-width: 720px !important;
    }
    .media-container img {
        max-width: 720px !important;
    }
    i.material-icons {
        vertical-align: middle;
    }
    .content-margin {
        margin-bottom: 24px;
    }

    .no-select {
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently
                                      supported by Chrome, Edge, Opera and Firefox */
    }
    @media screen and (min-width: 1280px) {
        main {
            padding-top: 0 !important;
            padding-left: 304px !important;
            padding-right: 24px !important;
        }
        main h2:first-child  {
            margin-top: 0!important;
        }
        [\#header] {
            padding-left: 316px;
            display: none;
        }
        h1[\#alt_header] {
            margin-top: 32px;
            margin-bottom: 48px;
            margin-left: -28px;
            visibility: visible;
        }
        .header-menu-button {
            display: none;
        }

        [z-load*="/components/menu-overlay"] .menu-button.center {
            right: calc(50% - 28px - 140px)!important;
            left: calc(50% - 28px + 140px)!important;
        }
        [z-load*="/components/menu-overlay"] [z-field="menu_overlay"].center {
            left: 280px!important;
        }
    }

    /* UI state classes */
    .not-ready {
        opacity: 0.5;
        -webkit-animation: pulse .5s infinite ease-in-out;
        -o-animation: pulse .5s infinite ease-in-out;
        -ms-animation: pulse .5s infinite ease-in-out;
        -moz-animation: pulse .5s infinite ease-in-out;
        animation: pulse .5s infinite ease-in-out;
    }
    @-webkit-keyframes pulse {
        0% { opacity: 0.2; }
        50% { opacity: 0.4; }
        100% { opacity: 0.2; }
    }
    @keyframes pulse {
        0% { opacity: 0.2; }
        50% { opacity: 0.4; }
        100% { opacity: 0.2; }
    }

    [z-load="@lib/templates/mdl-card-image"] {
        position: relative;
        width: 256px;
        height: 256px;
    }
    [z-include][z-ready=true].visible-on-ready, [z-load][z-ready=true].visible-on-ready {
        transition: opacity 300ms ease-in-out;
    }
    .drawer-header {
    color:white;
    height: 104px;
    padding: 12px;
    background: rgb(25,118,210);  /* fallback for old browsers */
}
.drawer-header img.logo {
    width: 84px;
    height: 84px;
    border: none;
    border-radius: 56px;
    background: transparent;
}
[data-theme="dark"] .drawer-header img.logo {
    background: #000;
}

.drawer-header .title img {
    margin-left: auto;
    margin-right: auto;
    opacity: 0.85;
    width: 220px;
}

.drawer-header .subtitle {
    margin-left: 4px;
    margin-right: 4px;
    font-size: 100%;
    opacity: 0.75;
}
.drawer-header code {
    color: yellow;
}

.drawer-content {
    background: white;
}
[data-theme="dark"] .drawer-content {
    background: #24333e;
}

.drawer-content ul {
    padding: 0;
    margin-top: 8px;
    /*font-size: 120%;*/
}
.drawer-content li:hover a {
    /*box-shadow: 1px 0 rgb(0 0 0 / 15%);
    background: rgba(160,160,160,0.1);*/
    color: var(--primary-color);
}
.drawer-content li {
    border-radius: 0 24px 24px 0;
    margin: 0 10px 0 0;
    min-height: 48px;
    vertical-align: center;
    align-content: center;
    align-items: center;
    list-style: none;
}
.drawer-content ul li[aria-current=page] {
    border: solid 1px rgba(0, 255, 0, 3%);
    box-shadow: 1px 0 rgb(0 0 0 / 15%);
    background-color: rgba(127, 127, 127, 10%);
}
.drawer-content ul li[aria-current=page] i, .drawer-content ul li[aria-current=page] a {
    color: var(--primary-color);
}
.drawer-content li a {
    font-weight: 400;
    font-size: 100%;
    position: relative;
    display: block;
    padding: 11px 16px;
    text-decoration: none;
}
.drawer-content li a span.mdl-button__ripple-container {
    border-radius: 0 24px 24px 0;
}
.drawer-content li a i {
    width: 40px;
    opacity: 0.65;
}
.drawer-content li a span.title {
    padding-top: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.drawer-content ul li[aria-current=page] a {
    /*pointer-events: none;
    font-weight: bold;*/
}
.drawer-content ul li a div.summary {
    font-size: 95%;
    line-height: 150%;
    margin-top: 4px;
    margin-right: 32px;
    font-style: italic;
    font-weight: 400!important;
    font-family: 'Helvetica Neue', Helvetica, sans-serif;
    color: lightslategray;
}
.drawer-content label {
    display: block;
    margin-top: 16px;
    margin-bottom: 16px;
    margin-left: 12px;
    font-weight: bold;
    color: var(--primary-color);
}
.drawer-content a {
   color: #24333e;
}
[z-context="menu-drawer"]:focus {
    outline: none;
}


/* forms */
/* forms */

.button {
    cursor: pointer;
    display: flex;
    padding: 6px;
    height: 48px;
    margin: 6px;
    align-items: center;
    border-radius: 6px;
    background-color: #bbbbbb15;
    box-shadow: 0 1px 4px 0 #00000055;
}
.button:hover {
    background-color: #bbbbbb1a;
    box-shadow: 0 3px 8px 0 #00000055;
}
.theme-dark .button:hover {
    box-shadow: 0 0 6px 2px var(--dark-color-text);
}
.button:active {
    background-color: #bbbbbb26;
    box-shadow: 0 0 2px 0 #00000055;
}
.button[disabled] {
    cursor: not-allowed;
    opacity: 0.5;
    box-shadow: 0 0 0 0 #00000055;
}

.input-container {
    position: relative;
    margin-bottom: 25px;
}
.input-container label {
    position:absolute;
    top: 8px;
    left: 0;
    pointer-event: none!important;
    transition: all 0.15s ease-in-out;
}
.input-container input, input:not([type="checkbox"]):not([type="radio"]):not(.mdl-textfield__input) {
    z-index: 1;
    border:0;
    width: 100%;
    background: transparent;
    border-bottom: 1px solid;
    padding: 8px 0 5px 0;
}
.input-container input:focus, input:focus:not([type="checkbox"]):not([type="radio"]) {
    border: none;
    outline: none;
    border-bottom: 1px solid #bd0505;
}
.input-container input:focus ~ label,
.input-container input:valid ~ label {
    top: -14px;
    font-size: 80%;
    font-weight: bold;
}


[type=radio],
[type=checkbox] {
    -webkit-appearance: none;
    -moz-appearance:    none;
    appearance:         none;
    border: solid 1px;
}
[type=radio],
[type=checkbox] {
    width: 22px!important;
    height: 18px;
    margin-left: 6px;
    margin-right: 6px;
    position: relative;
    border: solid 1px;
    border-radius: 2px;
}
[type=radio]:checked::before,
[type=checkbox]:checked::before {
    content: "";
    width: 12px;
    height: 10px;
    position: absolute;
    top: 3px;
    left: 4px;
}
[type=radio],
[type=radio]:checked::before{
    border-radius: 100%;
}

:root {
    --lite-color: #fff;
    --lite-color-text: #000;
    --lite-nav-color: #007ca7;
    --lite-nav-color-text: #fff;
    --lite-color--accent: #e10c57;
    --lite-color--primary: #3954be;
    --lite-color--code: #005000;
    --lite-font--weigth: 400;

    --dark-color: #141414;
    --dark-color-text: #d2d2d2;
    --dark-nav-color: #741f3b; /* #014b76; */ /* #60142d; */
    --dark-nav-color-text: #ccc;
    --dark-color--accent: #f1c700;
    --dark-color--primary: #6ba64d;
    --dark-color--code: #8fc563;
    --dark-font--weigth: 400;
}

/*========================*\
      Theme 'lite'
\*========================*/

body{
    background-color: var(--lite-color);
    color: var(--lite-color-text);
    font-weight: var(--lite-font--weigth);
}
nav, footer {
    background-color: var(--lite-nav-color);
    color: var(--lite-nav-color-text);
    fill: var(--lite-nav-color-text);
    box-shadow: 0 4px 6px 0 rgb(0 0 0 / 20%), 0 -4px 12px 0 rgb(0 0 0 / 20%);
}
nav svg, .menu-button svg {
    fill:var(--lite-nav-color-text);
}
svg {
    fill:var(--lite-color-text);
}
nav a, footer a {
    color: var(--lite-nav-color-text);
}
a {
    color: var(--lite-color--accent);
    text-decoration: none;
}
main h1, main h2, main h3 {
    color: var(--lite-color--primary);
}
code:not([class*=language-]), pre:not([class*=language-]) {
    color: var(--lite-color--code);
}
.accent {
    color: var(--lite-color--accent);
    fill: var(--lite-color--accent);
}
.primary {
    color: var(--lite-color--primary);
    fill: var(--lite-color--primary);
}
.background {
    background-color: var(--lite-color);
}
.input-container input,  input {
  color: var(--lite-color-text);
  border-bottom-color: var(--lite-color--primary);
}
.input-container input:valid,  input:valid {
  border-bottom-color: var(--lite-color--primary)!important;
}

[type=radio]:checked::before,

[type=checkbox]:checked::before {
    background-color: var(--lite-color--accent);
}

[type=radio],

[type=checkbox] {
    border-color: var(--lite-color--primary);
}

button {
    color: var(--lite-color-text);
    fill: var(--lite-color-text);
}

/*========================*\
      Theme 'dark'
\*========================*/

body.theme-dark {
    background-color: var(--dark-color);
    color: var(--dark-color-text);
    font-weight: var(--dark-font--weigth);
}
.theme-dark nav, .theme-dark footer {
    background-color: var(--dark-nav-color);
    color: var(--dark-nav-color-text);
    fill: var(--dark-nav-color-text);
    box-shadow: 0 4px 6px 0 rgb(0 0 0 / 20%), 0 -4px 12px 0 rgb(0 0 0 / 20%);
}
.theme-dark nav svg, .theme-dark .menu-button svg {
    fill:var(--dark-nav-color-text);
}
.theme-dark svg {
    fill:var(--dark-color-text);
}
.theme-dark nav a, .theme-dark footer a {
    color: var(--dark-nav-color-text);
}
.theme-dark a {
    color: var(--dark-color--accent);
    text-decoration: none;
}
.theme-dark main h1, .theme-dark main h2, .theme-dark main h3 {
    color: var(--dark-color--primary);
}
.theme-dark code:not([class*=language-]), .theme-dark pre:not([class*=language-]) {
    color: var(--dark-color--code);
}
.theme-dark .accent {
    color: var(--dark-color--accent);
    fill: var(--dark-color--accent);
}
.theme-dark .primary {
    color: var(--dark-color--primary);
    fill: var(--dark-color--primary);
}
.theme-dark .background {
    background-color: var(--dark-color);
}
.theme-dark .input-container input, .theme-dark  input {
  color: var(--dark-color-text);
  border-bottom-color: var(--dark-color--primary);
}
.theme-dark .input-container input:valid, .theme-dark  input:valid {
  border-bottom-color: var(--dark-color--primary)!important;
}
.theme-dark 
[type=radio]:checked::before,
.theme-dark 
[type=checkbox]:checked::before {
    background-color: var(--dark-color--accent);
}
.theme-dark 
[type=radio],
.theme-dark 
[type=checkbox] {
    border-color: var(--dark-color--primary);
}
.theme-dark 
button {
    color: var(--dark-color-text);
    fill: var(--dark-color-text);
}

/*
---------------------------------
 */

.theme-toggle[type=checkbox] {
    margin: 0;
    --size: 32px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    outline: none;
    border: none;
    cursor: pointer;
    width: var(--size)!important;
    height: var(--size)!important;
    box-shadow: inset calc(var(--size) * 0.33) calc(var(--size) * -0.25) 0;
    border-radius: var(--size);
    transition: all 500ms;
    color: var(--lite-nav-color-text);
}
.theme-toggle[type=checkbox]:checked {
    --ray-size: calc(var(--size) * -0.4);
    --offset-orthogonal: calc(var(--size) * 0.65);
    --offset-diagonal: calc(var(--size) * 0.45);
    transform: scale(0.75);
    box-shadow: inset 0 0 0 var(--size),
        calc(var(--offset-orthogonal) * -1) 0 0 var(--ray-size),
        var(--offset-orthogonal) 0 0 var(--ray-size),
        0 calc(var(--offset-orthogonal) * -1) 0 var(--ray-size),
        0 var(--offset-orthogonal) 0 var(--ray-size),
        calc(var(--offset-diagonal) * -1) calc(var(--offset-diagonal) * -1) 0 var(--ray-size),
        var(--offset-diagonal) var(--offset-diagonal) 0 var(--ray-size),
        calc(var(--offset-diagonal) * -1) var(--offset-diagonal) 0 var(--ray-size),
        var(--offset-diagonal) calc(var(--offset-diagonal) * -1) 0 var(--ray-size);
    color: var(--dark-nav-color-text);
    background-color: transparent!important;
}
.theme-toggle[type=checkbox]:checked::before {
    background-color: transparent!important;
}

/* ----- MENU OVERLAY COMPONENT ----- */
[z-load*="/components/menu-overlay"] .circle-button {
    border: solid 1px var(--lite-color);
    background-color: var(--lite-nav-color)!important;
    fill: var(--lite-nav-color-text)!important;
}
.theme-dark [z-load*="/components/menu-overlay"] .circle-button {
    border: solid 1px var(--dark-color);
    background-color: var(--dark-nav-color)!important;
    fill: var(--dark-nav-color-text)!important;
}
.theme-dark [z-load*="/components/menu-overlay"] div[z-field="menu_overlay"] {
    background: radial-gradient(circle at bottom, black, #000000dd, #00000077, transparent)!important;
}

</style>

</head>


<!-- scroll helper is used to show/hide the header when scrolling -->
<body ctrl z-load="@lib/controllers/header-auto-hide" z-lazy="scroll"
      data-o-header="header" data-o-show-end="false" data-theme="indigo-deep_purple"
      layout="column stretch-stretch">

    <nav #header layout="row center-start">
        <div self="stretch" layout="row center-start">
            <button onclick="menuDrawer.open()" class="header-menu-button mdl-button mdl-button--icon">
                <i class="material-icons">menu_open</i>
            </button>
            <h1 self="size-x1" class="title">Programs (APP)</h1>
        </div>
    </nav>


    <main layout="column top-center">

        
            <h1 #alt_header class="title">Programs (APP)</h1>
        

        <div self="size-x1" class="content">
            <p>What really makes of HomeGenie an <em>home automation</em> software is the set of
automation programs that are shipped with its factory settings.</p>
<p>If we disable all those programs, HomeGenie will just turn into
a dumb box, only capable of switching on and off devices on user request.</p>
<p>This is because the core of HomeGenie is a <em>generic purpose</em> automation
engine that is called A.P.E., the Automation Programs' Engine and that
does not provide intelligence of any sort by itself.</p>
<p>So, what really specialize the use of HomeGenie for a particular purpose
or another, are all the automation programs that are defined into it.</p>
<p>All functionality described so far, like <em>Smart Lights</em> or the <em>Security
Alarm System</em>, are in fact implemented through automation programs that
we can also explore and modify from the web user interface using the
<em>Program Editor</em>.</p>
<p>We'll then see how automation programs can be used either to accomplish
simple tasks like creating scenarios or more complex tasks like integrating
new devices or services.</p>
<h2>Program Editor</h2>
<p>The <em>Program Editor</em> can be accessed from the <em>Automation</em> section of the *<em>Configure</em>
menu. There, automation programs are conveniently organized into groups.
New automation programs can be created by choosing a group and then
selecting the <em>Add program</em> option from the <em>Action</em> menu located in the
bottom-right corner.
An automation program can be coded using one of the following programming
languages:</p>
<ul>
<li>CSharp</li>
<li>Javascript</li>
<li>Python</li>
</ul>
<p>Despite of the selected language, all programs can use the same set of <a href="api/ape/annotated.html">Helper Classes</a>
to access <em>HG</em> resources or external services in the same way.</p>
<div class="media-container">
    <img self="size-medium" src="https://lh3.googleusercontent.com/i_DtXr1NEVuA1J4CLpC1_GHsY9zUHFMUCM2CQUoN4vn028zP6vQ3kCwAfMdX7ULKOA_LuKb9oiwqaq6xk3ROyNrv0h88iDieR5bMV96oAExtyF2kOIBih0qhEwkX3e-vJaOZxgyanc_vNiZZUvTFews0L94AQcSVQxUsLBQxuZcK9FuE03-tkDhNQFxX-Hxv4CNQgeJ5W-H_9huh8WzyA9W6GlNgkJ8DaAdn1Bw1VJwj7w-9lo-evUYrNHcWDw1oWwkzYdpO5HJEtpHM0-Dl56R2GeO62ZKNAW0HOvopCWF0yKQtuzJ3DOecHuV8_hoZghnh6PGBERtZwk9_bVbfIrO7pUJW9F8WeUU9txWfRiMgerMqGc9lMZqgt7st3vq_NAnzadMg3dMDjx2LfzfREEjRwm6Oi-wPuAsSc9ZFHseW6qPiyfhKhMJmscZhxWFzCyywo_69tB5LaGXS_1z9ZB9CxefqXynheq9JDiaXQo88_ppVWulXSKMujmAKQcIFbgRjx8DxZlkMxspGhp49cY0cSBQy2eRin-AZVCbDGV4=w1172-h783-no" />
</div>
<h3>Example - Turning off lights in a given group</h3>
<p>The following example is using the <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_modules_manager.html">ModulesManager</a> helper class to turn off all lights in the <em>Porch</em> group:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// C#</span><br><span class="token keyword">var</span> lights <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">InGroup</span><span class="token punctuation">(</span><span class="token string">"Porch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>porchLights<span class="token punctuation">.</span><span class="token function">Off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Javascript</span><br>lights <span class="token operator">=</span> hg<span class="token punctuation">.</span>Modules<span class="token punctuation">.</span><span class="token function">InGroup</span><span class="token punctuation">(</span><span class="token string">'Porch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>lights<span class="token punctuation">.</span><span class="token function">Off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Javascript with camelCase</span><br>lights <span class="token operator">=</span> hg<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">inGroup</span><span class="token punctuation">(</span><span class="token string">'Porch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>lights<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Python</span><br>lights <span class="token operator">=</span> hg<span class="token punctuation">.</span>Modules<span class="token punctuation">.</span><span class="token function">InGroup</span><span class="token punctuation">(</span><span class="token string">'Porch'</span><span class="token punctuation">)</span><br>lights<span class="token punctuation">.</span><span class="token function">Off</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>so all of these are very similar, just using own language specific syntax.</p>
<h4>Remarks</h4>
<p>The <strong>hg.</strong> prefix, used to address <em><a href="api/ape/annotated.html">Helper Classes</a></em>,
can be omitted when using C# but must be used for all other languages.</p>
<p>The <strong>camelCase</strong> coding practice can be adopted for <em>Javascript</em> programs
when calling helper methods.</p>
<p>Some <em><a href="api/ape/annotated.html">Helper Class</a></em> methods may require a
callback function as an argument.
The following examples show how callbacks can be passed in the various
language flavours.</p>
<h3>Example - Using callbacks in different languages</h3>
<p>The <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_events_helper.html#afcf0d379d8dd2da00c2adf1c3c9996f3">When.SystemStarted</a> method
requires a callback as argument:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Output a speech message from the speaker</span><br><span class="token comment">// right after HomeGenie is started and ready.</span><br><br><span class="token comment">// C#</span><br>When<span class="token punctuation">.</span><span class="token function">SystemStarted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span><br>    Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">"HomeGenie is now ready!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Javascript</span><br>hg<span class="token punctuation">.</span>when<span class="token punctuation">.</span><span class="token function">systemStarted</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    hg<span class="token punctuation">.</span>program<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">'HomeGenie is now ready!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Python</span><br>def <span class="token function">started_handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><br>    hg<span class="token punctuation">.</span>Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">'HomeGenie is now ready!'</span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> True<br>hg<span class="token punctuation">.</span>When<span class="token punctuation">.</span><span class="token function">SystemStarted</span><span class="token punctuation">(</span>started_handler<span class="token punctuation">)</span></code></pre>
<p>Further documentation about specific syntax of each language can be found
on the following pages (or just searching the web):</p>
<ul>
<li>dotnet <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/">C#</a></li>
<li>Javascript - <a href="https://github.com/sebastienros/jint">Jint</a></li>
<li>Python - <a href="http://ironpython.net/documentation/">IronPython</a></li>
</ul>
<h2>Program Code and Startup Code</h2>
<p>An automation program is split into two parts. The <em>Program Code</em>, which
is the main code, and the <em>Startup Code</em>.</p>
<p><em>Startup Code</em> is a piece of code that can be used to set various program
options and also to tell <em>HG</em> when to run the main program code by using
the <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a34a937a2bc052615d27137c3663d10c6">Program.Run</a>
instruction in it.</p>
<p>When the program is idle (thus the program code is not running),
the <em>Startup Code</em> is evaluated every minute or as soon as a new event
occurs in the system.</p>
<h3>Example - Startup Code</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Run the program every day at 7 am</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>Scheduler<span class="token punctuation">.</span><span class="token function">IsScheduling</span><span class="token punctuation">(</span><span class="token string">"0 7 * * *"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    Program<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Other instructions commonly used in the <em>Startup Code</em> are:</p>
<ul>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#aba65b477efba06ac22a4f908881bbece">Program.Setup</a></li>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#ab4c0baea094fcf0f29c57cf1f157c68b">Program.UseWidget</a></li>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a77342214dc230ce4eab47ffc4c10bd7f">Program.AddOption</a></li>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a59e041d4aa2ea5fcd00d4a8b5efacc6b">Program.AddFeature</a></li>
</ul>
<p>The use of these command is described later in this page.</p>
<h4>Remarks</h4>
<p>when <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a34a937a2bc052615d27137c3663d10c6">Program.Run</a>
is called in the <em>Startup Code</em>,
the program's code will run only after that <em>Startup Code</em> reaches it's
end. So it's a good practice not to put any
long-time consuming operation or infinite loop in the <em>Startup Code</em>.</p>
<p><em>Startup Code</em> and <em>Program Code</em> are not running in the same scope.
Data between them that can be shared by using
<a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_module_helper.html#a016f9d7512c4407acbfc2d7c72d02a17">Modules parameters</a>
and other structures such as
<a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a111c3e247c9a22cf44e032bfb568f876">Program Store</a>
and <a href="api/ape/a00013.htmlapi/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_settings_helper.html">System Settings</a>.</p>
<p><a name="modules"></a></p>
<h2>Virtual Modules, Program Module and Widgets</h2>
<p>Virtual Modules (or just modules) are used in <em>HG</em> as an abstraction for devices or services. So, each of them, represent
a particular device or service in the system and holds its data into <em>Parameter</em> fields. For example: a module for a
light switch device will have a parameter called <em>Status.Level</em> for indicating the current state of the light
(1 = turned on, 0 = turned off); a temperature sensor module will have a <em>Sensor.Temperature</em> parameter... and so on.<br/></p>
<p>Each module is identified by <strong>Domain</strong>, <strong>Address</strong>, <strong>Type</strong> and <strong>Widget</strong>. The <strong>Domain</strong> is used as a group for same class
of modules. Example of domain names are: <code>HomeAutomation.ZWave</code>, <code>HomeAutomation.PhilipsHue</code>, <code>HomeAutomation.X10</code>.
The <strong>Address</strong> (usually a number) is used to identify uniquely each module belonging to the same domain. The <strong>Type</strong>
will define what kind of module is. Commonly used types are: <code>Program</code>, <code>Switch</code>, <code>Light</code>, <code>Dimmer</code>, <code>Sensor</code>,
<code>Temperature</code>, <code>Siren</code>, <code>Fan</code>, <code>Thermostat</code>, <code>Shutter</code>, <code>DoorWindow</code>, <code>DoorLock</code>,
<code>MediaTransmitter</code>, <code>MediaReceiver</code>. The <strong>Widget</strong> will determine how a module will be displayed in the User
Interface. There are already a bunch of widgets available in <em>HG</em>, but custom ones can also be designed using the
integrated <a href="widgets.html">Widget Editor</a>.</p>
<p>Also automation programs have a module associated to each of them, so program's data can be displayed in the
UI using a widget. The standard widget that can be used for a program is a simple button that once clicked runs the
program.</p>
<h3>Example - Associating a widget to a program</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// This program will be displayed as a simple button</span><br>Program<span class="token punctuation">.</span><span class="token function">UseWidget</span><span class="token punctuation">(</span><span class="token string">"homegenie/generic/program"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>A program can also create and handle futher modules by using the following functions:</p>
<ul>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a6ce0c82ab9edb50be6689919cf29c1ca">Program.AddVirtualModules</a></li>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#ad74a2a82101dd80e17244fd03eaf181f">Program.AddVirtualModule</a></li>
<li><a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#ac1c5f107619fed38f6cb9d9224fd3506">Program.RemoveVirtualModule</a></li>
</ul>
<h2>Program Options</h2>
<p>Automation programs can have an options dialog in the UI, so that the user may configure some aspect of it. As an example
we can look at the <em>Weather Underground</em> program. This program needs to know the city name so to display weather data of
the given location.</p>
<h3>Example - Adding a field to the program options dialog</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Add "city" text field to the program options UI dialog</span><br>Program<span class="token punctuation">.</span><span class="token function">AddOption</span><span class="token punctuation">(</span><br>    <span class="token string">"Location"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- identifier name of the option</span><br>    <span class="token string">"autoip"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- default value</span><br>    <span class="token string">"City name"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- description</span><br>    <span class="token string">"text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- UI field type and parameters</span><br><span class="token comment">// ...</span></code></pre>
<h3>Example - Getting the entered value of a program option</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> location <span class="token operator">=</span> Program<span class="token punctuation">.</span><span class="token function">Option</span><span class="token punctuation">(</span><span class="token string">"Location"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">;</span></code></pre>
<p>The <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a77342214dc230ce4eab47ffc4c10bd7f">Program.AddOption</a> instruction is meant to be used inside
the <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#aba65b477efba06ac22a4f908881bbece">Program.Setup</a> delegate.</p>
<h2>Program Features</h2>
<p>In a similar way as described for the program options dialog, module also have an UI options dialog where an automation
program can add its own options so to let the user configure different per-module values. As an example we can look
at the <em>Automatic turn-off</em> program. This program will add to the options dialog of modules a new field where the
user can set the turn-off delay for each module.</p>
<h3>Example - Adding a program feature to modules</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// This will display a slider for setting the timeout</span><br><span class="token comment">// in the module options UI dialog</span><br>Program<span class="token punctuation">.</span><span class="token function">AddFeature</span><span class="token punctuation">(</span><br>    <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- affected domain name (empty "" string stands for "any domain")</span><br>    <span class="token string">"Switch,Light,Dimmer"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- affected module types</span><br>    <span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- identifier name for this feature</span><br>    <span class="token string">"Automatic turn off delay (seconds)"</span><span class="token punctuation">,</span> <span class="token comment">// &lt;-- description</span><br>    <span class="token string">"slider:0:3600:1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- UI field type and parameters</span><br>Program<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The last parameter of the <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#a59e041d4aa2ea5fcd00d4a8b5efacc6b">Program.AddFeature</a>
function will select the type of control that will be displayed in the UI module options dialog.
The following are the currently implemented UI field types:</p>
<ul>
<li><code>text</code>
<br/>a simple text field</li>
<li><code>checkbox</code>
<br/>a checkbox field</li>
<li><code>slider:&lt;min&gt;:&lt;max&gt;:&lt;step&gt;</code>
<br/>a slider control</li>
<li><code>password</code>
<br/>a password field</li>
<li><code>module.text:&lt;match_domain&gt;:&lt;match_type&gt;:&lt;match_parameter&gt;</code>
<br/>autocomplete field for selecting a module</li>
<li><code>capture:&lt;parameter_to_capture&gt;</code>
<br/>capture the next value coming from a given parameter event</li>
<li><code>cron.text</code>
<br/>field with wizard dialog for building scheduler cron expression</li>
<li><code>store.script</code></li>
<li><code>store.script.list</code></li>
</ul>
<h2>Reacting to module events</h2>
<p>Each time a module parameter is updated a new event is raised in the system. By using either the
<a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_events_helper.html#a2345d703592c2fe90284b13ce7ac2650">ModuleParameterIsChanging</a> or the
<a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_events_helper.html#a7e82383574aeff32db8d09d4eb916718">ModuleParameterChanged</a>
function, a program can listen to the system event stream and react in consequence of a module event.
The difference between <em>ModuleParameterIsChanging</em> and <em>ModuleParameterChanged</em>, is that the first one is called before the
latter one. In most situations <em>ModuleParameterChanged</em> will be used.</p>
<h3>Example - Apply turn off timeout when a module is switched on</h3>
<h4>CSharp</h4>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// this function will be called each time a module parameter is updated</span><br>When<span class="token punctuation">.</span><span class="token function">ModuleParameterChanged</span><span class="token punctuation">(</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> parameter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// check if the module raising the event has the Turn Off Delay set</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span><span class="token function">HasFeature</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>      module<span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>DecimalValue <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><br>  <span class="token punctuation">{</span><br>    <span class="token comment">// Check if the module has just been turned on</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token string">"Status.Level"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>        parameter<span class="token punctuation">.</span>Statistics<span class="token punctuation">.</span>Last<span class="token punctuation">.</span>Value <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span><br>        parameter<span class="token punctuation">.</span>DecimalValue <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>      <span class="token comment">// Run a background timer that will turn off the light</span><br>      <span class="token class-name"><span class="token keyword">var</span></span> pauseDelay <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>DecimalValue<span class="token punctuation">;</span><br>      Program<span class="token punctuation">.</span><span class="token function">RunAsyncTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">{</span><br>        <span class="token function">Pause</span><span class="token punctuation">(</span>pauseDelay<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token comment">// Check if the light is still on (also module.IsOn could be used)</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span>DecimalValue <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><br>        <span class="token punctuation">{</span><br>          module<span class="token punctuation">.</span><span class="token function">Off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>          Program<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token string">"Turn Off Delay"</span><span class="token punctuation">,</span><br>            module<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"&lt;br>"</span> <span class="token operator">+</span><br>            module<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>Address <span class="token operator">+</span><br>            <span class="token string">" switched off."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// the program will be running in the background waiting for events</span><br>Program<span class="token punctuation">.</span><span class="token function">GoBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4>Javascript</h4>
<pre class="language-javascript"><code class="language-javascript">hg<span class="token punctuation">.</span>when<span class="token punctuation">.</span><span class="token function">moduleParameterChanged</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> parameter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// put code here using "module" and "parameter" objects</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>hg<span class="token punctuation">.</span>program<span class="token punctuation">.</span><span class="token function">goBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4>Python</h4>
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">module_updated_fn</span><span class="token punctuation">(</span>mod<span class="token punctuation">,</span>par<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token comment"># put code here using "mod" and "par" objects</span><br>    <span class="token keyword">return</span> <span class="token boolean">True</span><br>hg<span class="token punctuation">.</span>When<span class="token punctuation">.</span>ModuleParameterChanged<span class="token punctuation">(</span>module_updated_fn<span class="token punctuation">)</span><br>hg<span class="token punctuation">.</span>Program<span class="token punctuation">.</span>GoBackground<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>Automation programs can also raise events, so the system (and other programs as well) will acknowledge when a module has been updated.
The function <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#af51db91ed13809da94337aac3c1053b7">Program.RaiseEvent</a> is meant for that.</p>
<p><a name="commands"></a></p>
<h2>Reacting to commands</h2>
<p>When the user click a button or any other control of a module widget, an <a href="api/mig/overview.html">API</a> command request is
sent to <em>HG</em>. A standard HTTP API request, follows the syntax:<br/>
<code>/api/&lt;module_domain&gt;/&lt;module_address&gt;/&lt;command&gt;[/&lt;option_1&gt;/../&lt;option_n&gt;]</code><br/>
For example when clicking <strong>On</strong> and <strong>Off</strong> buttons on the widget of a <strong>Z-Wave</strong> switch with node id <strong>5</strong>, the following
HTTP requests are made:</p>
<pre><code>/api/HomeAutomation.ZWave/5/Control.On
/api/HomeAutomation.ZWave/5/Control.Off
</code></pre>
<p>So if an automation program creates a <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_program_helper.html#ad74a2a82101dd80e17244fd03eaf181f">virtual module</a> of switch type in the domain <em>MyProgram.Domain</em></p>
<pre class="language-csharp"><code class="language-csharp">Program<span class="token punctuation">.</span><span class="token function">AddVirtualModule</span><span class="token punctuation">(</span><br>    <span class="token string">"MyProgram.Domain"</span><span class="token punctuation">,</span>          <span class="token comment">// &lt;-- domain name</span><br>    <span class="token string">"1"</span><span class="token punctuation">,</span>                         <span class="token comment">// &lt;-- module address</span><br>    <span class="token string">"Switch"</span><span class="token punctuation">,</span>                    <span class="token comment">// &lt;-- module type</span><br>    <span class="token string">"homegenie/generic/switch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- widget used to display this module</span></code></pre>
<p>it will be able to handle commands addressed to this module by listening to API calls going to the <em>MyProgram.Domain</em> domain.
The <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_events_helper.html#a58515455945c35783cde47d21f844663">When.WebServiceCallReceived</a> helper function is used for this purpose:</p>
<h4>CSharp</h4>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// handle requests of type http://&lt;hg_address>/api/MyProgram.Domain/...</span><br>When<span class="token punctuation">.</span><span class="token function">WebServiceCallReceived</span><span class="token punctuation">(</span><span class="token string">"MyProgram.Domain"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// All API requests going to the "MyProgram.Domain"</span><br>    <span class="token comment">// will hit this piece of code.</span><br>    <span class="token comment">// e.g. for the "On" command, &lt;args> will contain the string</span><br>    <span class="token comment">// "MyProgram.Domain/1/Control.On", so...</span><br>    <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token class-name"><span class="token keyword">string</span></span> domain <span class="token operator">=</span> req<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> address <span class="token operator">=</span> req<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> command <span class="token operator">=</span> req<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token comment">// be optimistic</span><br>    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token string">"{ \"ResponseValue\" : \"Ok\" }"</span><span class="token punctuation">;</span><br>    <span class="token comment">// get a reference to the addressed module</span><br>    <span class="token class-name"><span class="token keyword">var</span></span> module <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">InDomain</span><span class="token punctuation">(</span>domain<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// process the command</span><br>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>command<span class="token punctuation">)</span><br>    <span class="token punctuation">{</span><br>        <span class="token keyword">case</span> <span class="token string">"Control.On"</span><span class="token punctuation">:</span><br>            <span class="token comment">// set the status of the module to on</span><br>            Program<span class="token punctuation">.</span><span class="token function">RaiseEvent</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> <span class="token string">"Status.Level"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"Switched on"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>        <span class="token keyword">case</span> <span class="token string">"Control.Off"</span><span class="token punctuation">:</span><br>            <span class="token comment">// set the status of the module to off</span><br>            Program<span class="token punctuation">.</span><span class="token function">RaiseEvent</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> <span class="token string">"Status.Level"</span><span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">,</span> <span class="token string">"Switched off"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>        <span class="token keyword">default</span><span class="token punctuation">:</span><br>            response <span class="token operator">=</span> <span class="token string">"{ \"ResponseValue\" : \"Error\" }"</span><span class="token punctuation">;</span><br>            Program<span class="token punctuation">.</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token string">"MyProgram"</span><span class="token punctuation">,</span> <span class="token string">"Unrecognized command received"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> response<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Program<span class="token punctuation">.</span><span class="token function">GoBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>So when the user will click the <em>On</em> and <em>Off</em> buttons of the virtual module widget, the code above will raise an event
that will update the module <em>Status.Level</em> property with <em>1</em> or <em>0</em>. This event will be also received by the widget that will so
update the displayed data accordingly.</p>
<h4>Javascript</h4>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// handle requests of type http://&lt;hg_address>/api/MyProgram.Domain/...</span><br>hg<span class="token punctuation">.</span>when<span class="token punctuation">.</span><span class="token function">webServiceCallReceived</span><span class="token punctuation">(</span><span class="token string">'MyProgram.Domain'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// handle the request here....</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">ResponseValue</span> <span class="token operator">:</span> <span class="token string">'Ok'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>hg<span class="token punctuation">.</span>program<span class="token punctuation">.</span><span class="token function">goBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4>Python</h4>
<pre class="language-python"><code class="language-python"><span class="token comment"># handle requests of type http://&lt;hg_address>/api/MyProgram.Domain/...</span><br><span class="token keyword">def</span> <span class="token function">handle_request_fn</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token comment"># handle the request here....</span><br>    <span class="token keyword">return</span> <span class="token string">"Ok"</span><br>hg<span class="token punctuation">.</span>When<span class="token punctuation">.</span>WebServiceCallReceived<span class="token punctuation">(</span><span class="token string">"MyProgram.Domain"</span><span class="token punctuation">,</span> handle_request_fn<span class="token punctuation">)</span><br>hg<span class="token punctuation">.</span>Program<span class="token punctuation">.</span>GoBackground<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<h2>Common operations on modules</h2>
<p>See the <a href="api/ape/class_home_genie_1_1_automation_1_1_scripting_1_1_modules_manager.html">ModulesManager</a> helper class documentation to find out all available functions and properties.</p>
<h3>Example - Selecting modules</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Selecting dimmer lights in the same group</span><br><span class="token class-name"><span class="token keyword">var</span></span> roomDimmers <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">InGroup</span><span class="token punctuation">(</span><span class="token string">"Living Room"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OfDeviceType</span><span class="token punctuation">(</span><span class="token string">"Dimmer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Set the level of living room dimmers to 50%</span><br>roomDimmers<span class="token punctuation">.</span>Level <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span><br><span class="token comment">// Say the average temperature of all sensors</span><br><span class="token class-name"><span class="token keyword">var</span></span> tempSensors <span class="token operator">=</span> Modules<br>    <span class="token punctuation">.</span><span class="token function">OfDeviceType</span><span class="token punctuation">(</span><span class="token string">"Sensors"</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">WithParameter</span><span class="token punctuation">(</span><span class="token string">"Sensor.Temperature"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">"The average temperature is "</span> <span class="token operator">+</span> tempSensors<span class="token punctuation">.</span>Temperature<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Example - Reading a module parameter</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Getting a single module</span><br><span class="token class-name"><span class="token keyword">var</span></span> tempSensor <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">InDomain</span><span class="token punctuation">(</span><span class="token string">"HomeAutomation.ZWave"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithAddress</span><span class="token punctuation">(</span><span class="token string">"5"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token class-name"><span class="token keyword">var</span></span> temperature <span class="token operator">=</span> tempSensor<span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span><span class="token string">"Sensor.Temperature"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// .Value property returns a string</span><br>Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">"Current temperature value is "</span> <span class="token operator">+</span> temperature<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// .DecimalValue property returns a number (double)</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>temperature<span class="token punctuation">.</span>DecimalValue <span class="token operator">></span> <span class="token number">24</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">"Well... it's actually kinda hot day!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h3>Example - Selecting/Testing modules having a given feature</h3>
<pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Selecting all modules with the "turn off" feature</span><br><span class="token class-name"><span class="token keyword">var</span></span> mods <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">WithFeature</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Testing if a module have the "turn off" feature</span><br><span class="token class-name"><span class="token keyword">var</span></span> porchLight <span class="token operator">=</span> Modules<span class="token punctuation">.</span><span class="token function">WithName</span><span class="token punctuation">(</span><span class="token string">"My Porch Light"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>porchLight<span class="token punctuation">.</span><span class="token function">HasFeature</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">{</span><br>    <span class="token class-name"><span class="token keyword">var</span></span> timeout <span class="token operator">=</span> porchLight<span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span><span class="token string">"HomeGenie.TurnOffDelay"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">;</span><br>    Program<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token string">"The porch light has a turn off timeout of "</span> <span class="token operator">+</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>

            

    
    

    <div layout="rows center-spread" style="margin-top: 112px; gap:12px; margin-bottom: 32px; padding-left: 8px; padding-right: 8px; font-size: 140%">

        
            <div>&nbsp;</div>
        

        
        <a href="/content/devs/widgets/" style="text-align: center">
            <div layout="row center-center">
                <span style="padding-left: 24px">Next</span>
                <i class="material-icons">arrow_right</i>&nbsp;
            </div>
            <div class="navigation-title">Widgets</div>
        </a>
        

    </div>
    <style>
        .navigation-image {
            border-radius: 32px;
            border-color: rgba(100,200,200,0.5);
        }
        .navigation-title {
            color: var(--primary-color);
            margin: 8px;
            font-size: 80%;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>



        </div>

        
<footer self="size-large" layout="columns bottom-center" style="min-height: 120px">

    <div self="size-large" layout="rows center-justify" style="padding: 24px;">

        <div self="left">
            <a href="/feed/rss.xml" layout="row center-left" style="gap: 8px">
                <img src="/images/rss-feed.png" width="24" height="24">
                <strong>RSS feed</strong>
            </a>
        </div>

        <div>
            powered by <a href="https://zuixjs.org"><strong>zuix.js</strong></a>
        </div>

    </div>

</footer>



    </main>


    <!-- Navigation Drawer -->
    <div #drawer ctrl z-load="@lib/controllers/drawer-layout"
         z-context="menu-drawer" z-lazy="false"
         z-options="drawer_opts"
         class="drawer-layout no-select visible-on-ready"
         layout="column top-stretch">
        <!-- Navigation Drawer content -->

        <!-- Header -->
        <div class="drawer-header" layout="column justify-center">
            <a href="/" title="Home" class="title">
                <img alt="HomeGenie" src="/images/homegenie-text-logo.svg">
            </a>
            <div class="subtitle">Programmable smart home server.</div>
        </div>

        <!-- Menu items and other content -->
        <div class="drawer-content" self="size-x1">
            <ul>
    
            <li >
                <a href="/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">info_outline</i>
                        <span class="title">Introduction</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li >
                <a href="/content/getting-started/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">build</i>
                        <span class="title">Get started</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li >
                <a href="/content/clients/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">important_devices</i>
                        <span class="title">Clients</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li></ul>



        <label>Documentation</label>
        <ul>
            
            <li >
                <a href="/content/docs/setup/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">settings</i>
                        <span class="title">Setup</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/configure/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">tune</i>
                        <span class="title">Configuration</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/scenarios/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">tips_and_updates</i>
                        <span class="title">Scenarios</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/remotes/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">settings_remote</i>
                        <span class="title">IR/RF remotes</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/scheduling/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">schedule</i>
                        <span class="title">Scheduling</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/upnp_dlna/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">perm_media</i>
                        <span class="title">UPnP / DLNA</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/interconnect/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">lan</i>
                        <span class="title">Interconnections</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            </ul>

    


        <label>Developing</label>
        <ul>
            
            <li  aria-current="page">
                <a href="/content/devs/programs/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">extension</i>
                        <span class="title">Programs (APP)</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/devs/widgets/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">widgets</i>
                        <span class="title">Widgets</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li>
                <a href="/api/ape/annotated.html" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">emoji_nature</i>
                        <span class="title">Program API</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li>
                <a href="/api/mig/overview.html" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">emoji_nature</i>
                        <span class="title">Web API</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li></ul>

    

<!--
<ul>
    <li >
        <a href="/search" class="mdl-js-ripple-effect">
            <div layout="row center-left">
                <i class="material-icons">search</i>
                <span>Search</span>
            </div>
            <span class="mdl-button__ripple-container" draggable="false"><span class="mdl-ripple"></span></span>
        </a>
    </li>
</ul>
-->

        </div>

    </div>






<!-- Built with love using zUIx Web Starter -->

<script>

  // Google Analytics: change UA-40902095-1 to be your site's ID
  if (location.hostname !== "localhost" && location.hostname !== "127.0.0.1") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-40902095-1', 'auto');
    ga('send', 'pageview');
  }

</script>



</body>

<!-- page script -->
<script>
/** type {ComponentContext} */
let menuDrawer;
window.drawer_opts = {
  autoHideWidth: 1280,
  on: {
    'drawer:open': function() {
      /* ... */
    },
    'drawer:close': function() {
      /* ... */
    }
  },
  ready: function() {
    menuDrawer = this;
    menuDrawer.$.playAnimation(['animate__fadeIn', enterAnimation]);
    // TODO: work-around to very initial rendering occasionally not showing cards
    setTimeout(zuix.componentize, 300);
  }
};

function scrollbarVisible(element) {
  const r = element.getBoundingClientRect();
  return r.bottom !== r.height;
}

function processExternalLinks(view) {
    // Force opening of all non-local links in a new window
    zuix.$(view).find('a[href*="://"]')
        .attr('target', '_blank')
        .attr('rel', 'noreferrer');
}
zuix.hook('view:process', function(view) {
    processExternalLinks(view);
});
processExternalLinks(document);



// add presentation anim to the drawer
const referrerLink = document.createElement('a');
referrerLink.href = document.referrer;
const enterAnimation =
  (referrerLink.pathname === '/') ?
    'animate__fadeInLeft' : 'animate__fadeIn';

// smooth scroll for local anchors
function navigateTo(anchor) {
  const target = zuix.$.find('a[name="' + anchor + '"]');
  zuix.context(document.body).scroll
          .scrollTo(target, 500);
}



</script>


</html>

