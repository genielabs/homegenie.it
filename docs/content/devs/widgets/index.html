
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="HomeGenie Automation Programs Plugins, languages and SDK">
    <meta name="keywords" content="homegeniedocumentationwìdgetshtmleditormvcviewcontrollerjavascriptvirtual modules" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widgets</title>
    <link rel="author" href="humans.txt" />
    <link rel="alternate" type="application/rss+xml"
          title="RSS Feed for Widgets"
          href="/feed/rss.xml" />

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Progressive Web App -->
    <meta name="theme-color" content="white">
    <link rel="manifest" href="/manifest.json">

    <!-- Add to home screen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/images/icons/desktop/android-chrome-192x192.png">
    <link rel="icon" sizes="512x512" href="/images/icons/desktop/android-chrome-512x512.png">

    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="A zUIx website">
    <link rel="apple-touch-icon-precomposed" href="/images/icons/desktop/apple-touch-icon.png">
    <link rel="mask-icon" href="/images/icons/desktop/safari-pinned-tab.svg" color="#5bbad5">

    <!-- Tile color for Windows -->
    <meta name="msapplication-TileImage" content="/images/icons/desktop/mstile-150x150.png">
    <meta name="msapplication-TileColor" content="#ffc40d">

    <!-- Place favicon.ico in the root directory -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/desktop/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/desktop/favicon-16x16.png">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="https://www.example.com/">
    -->

    <link rel="preload" as="style" href="/css/fla/flex-layout-attribute.min.css" />
    <link rel="stylesheet" href="/css/fla/flex-layout-attribute.min.css" />
    <link rel="preload" as="style" href="/css/animate.min.css" />
    <link rel="stylesheet" href="/css/animate.min.css" />

    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="">
    <link rel="preload" as="style" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">


  
    <link rel="preload" as="style" href="/js/mdl/material.indigo-deep_purple.min.css">
    <link rel="stylesheet" href="/js/mdl/material.indigo-deep_purple.min.css">
  
    <link rel="preload" as="script" href="/js/mdl/material.min.js">
    <script src="/js/mdl/material.min.js"></script>



    <link rel="preload" as="style" href="/css/prism.css" />
    <link rel="stylesheet" href="/css/prism.css" />


    <!-- zuix.js https://github.com/zuixjs/zuix -->
    <link rel="preload" as="script" href="/js/zuix/zuix.min.js">
    <link rel="preload" as="script" href="/config.js">
    <script src="/js/zuix/zuix.min.js"></script>
    <script src="/config.js"></script>

<style>
    :root {
        --primary-color: #1d68a8; /* rgb(63,81,181) */
        --accent-color: rgb(124,77,255);
        --background-color: unset;
    }

    body {
        margin: 0;
        padding: 0;
        font-size: 14px;
        position: relative;
        min-height: 100vh;
        background: var(--background-color);
    }

    a {
        text-decoration: none;
    }
    a[name] {
        position: relative;
        top: -48px;
    }
    /* prevents links dragging */
    a, a::after, a::before {
        -webkit-user-drag: none;
        -webkit-app-region: no-drag;
    }

    img {
        max-width: 100%;
    }

    h1 {
        font-size: 230% !important;
        font-weight: 500;
    }
    h1.title {
        margin:0;
        padding-right: 48px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
    }
    h2 {
        font-size: 220% !important;
        color: var(--primary-color);
    }
    h3 {
        font-size: 190% !important;
        opacity: 0.9;
    }
    h4 {
        font-size: 160% !important;
        opacity: 0.8;
    }
    h5 {
        font-size: 150% !important;
        opacity: 0.7;
    }
    h6 {
        font-size: 130% !important;
        opacity: 0.6;
    }

    ul {
        margin-bottom: 24px;
    }

    li {
        margin-top: 4px;
        margin-bottom: 4px;
        font-size: 120%;
    }
    li small {
        font-family: Helvetica, sans-serif;
        font-size: 70%;
        font-weight: 600;
        margin-left: 6px;
        text-transform: uppercase;
        opacity: 0.5;
    }

    blockquote {
        font-size: 140%;
        opacity: 0.6;
    }

    p {
        font-size: 130%;
        line-height: 160%;
        margin-bottom: 24px;
    }

    hr {
        margin-bottom: 30px;
    }

    code[class*=language-], pre[class*=language-] {
        font-size: 115%;
    }
    pre:not([class*="language-"]) {
        width: 100%;
        max-width: 100%;
        overflow-x: auto;
    }

    pre[class*="language-"]{
        margin-top: 32px!important;
        margin-bottom: 32px!important;
    }
    code {
        color: #0b4d2c;
        overflow-wrap: break-word; /* for old browsers */
        overflow-wrap: anywhere;
    }

    main {
        min-height: 100vh;
        width: 100% !important;
        padding: 0 !important;
        transition: padding-left 150ms ease-in-out;
    }
    main div.content {
        width: 100% !important;
        max-width: 960px !important;
        padding-top: 24px;
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    main h2:first-child  {
        margin-top: 72px!important;
    }
    main h2:not(:first-child)  {
        margin-top: 64px;
    }
    main h3 {
        margin-top: 56px;
        margin-bottom: 16px;
    }

    [\#header] {
        position: fixed;
        z-index: 1;
        top:0; left: 0; right: 0; bottom: 0;
        height: 64px;
        padding-left: 8px;
        padding-right: 8px;
        background: #f1f1f1;
        box-shadow: 0 1px rgba(100, 100, 100, 30%);
    }
    h1[\#alt_header] {
        max-width: 100%;
        text-align: center;
        display: block;
        padding: 10px 56px 24px !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    nav, nav a {
        color: black!important;
    }
    footer {
        background: transparent!important;
        box-shadow: none!important;
    }
    footer, footer a {
        color: black!important;
    }

    .header-menu-button {
        cursor: pointer;
        height: 48px!important;
        width: 48px!important;
    }
    .header-menu-button i {
        color: black;
        font-size: 32px!important;
        left: 20px!important;
    }


    .download-button {
        height:120px;
        margin:8px;
        max-width: 380px;
        gap: 12px;
        padding: 12px;
        border-radius: 8px;
    }
    .download-button h3 {
        margin:0;
        font-size: 160% !important;
    }
    .download-button span {
        text-transform:none;
    }
    .media-container {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 24px;
        max-width: 720px !important;
    }
    .media-container img {
        max-width: 720px !important;
    }
    i.material-icons {
        vertical-align: middle;
    }
    .content-margin {
        margin-bottom: 24px;
    }

    .no-select {
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently
                                      supported by Chrome, Edge, Opera and Firefox */
    }
    @media screen and (min-width: 1280px) {
        main {
            padding-top: 0 !important;
            padding-left: 304px !important;
            padding-right: 24px !important;
        }
        main h2:first-child  {
            margin-top: 0!important;
        }
        [\#header] {
            padding-left: 316px;
            display: none;
        }
        h1[\#alt_header] {
            margin-top: 32px;
            margin-bottom: 48px;
            margin-left: -28px;
            visibility: visible;
        }
        .header-menu-button {
            display: none;
        }

        [z-load*="/components/menu-overlay"] .menu-button.center {
            right: calc(50% - 28px - 140px)!important;
            left: calc(50% - 28px + 140px)!important;
        }
        [z-load*="/components/menu-overlay"] [z-field="menu_overlay"].center {
            left: 280px!important;
        }
    }

    /* UI state classes */
    .not-ready {
        opacity: 0.5;
        -webkit-animation: pulse .5s infinite ease-in-out;
        -o-animation: pulse .5s infinite ease-in-out;
        -ms-animation: pulse .5s infinite ease-in-out;
        -moz-animation: pulse .5s infinite ease-in-out;
        animation: pulse .5s infinite ease-in-out;
    }
    @-webkit-keyframes pulse {
        0% { opacity: 0.2; }
        50% { opacity: 0.4; }
        100% { opacity: 0.2; }
    }
    @keyframes pulse {
        0% { opacity: 0.2; }
        50% { opacity: 0.4; }
        100% { opacity: 0.2; }
    }

    [z-load="@lib/templates/mdl-card-image"] {
        position: relative;
        width: 256px;
        height: 256px;
    }
    [z-include][z-ready=true].visible-on-ready, [z-load][z-ready=true].visible-on-ready {
        transition: opacity 300ms ease-in-out;
    }
    .drawer-header {
    color:white;
    height: 104px;
    padding: 12px;
    background: rgb(25,118,210);  /* fallback for old browsers */
}
.drawer-header img.logo {
    width: 84px;
    height: 84px;
    border: none;
    border-radius: 56px;
    background: transparent;
}
[data-theme="dark"] .drawer-header img.logo {
    background: #000;
}

.drawer-header .title img {
    margin-left: auto;
    margin-right: auto;
    opacity: 0.85;
    width: 220px;
}

.drawer-header .subtitle {
    margin-left: 4px;
    margin-right: 4px;
    font-size: 100%;
    opacity: 0.75;
}
.drawer-header code {
    color: yellow;
}

.drawer-content {
    background: white;
}
[data-theme="dark"] .drawer-content {
    background: #24333e;
}

.drawer-content ul {
    padding: 0;
    margin-top: 8px;
    /*font-size: 120%;*/
}
.drawer-content li:hover a {
    /*box-shadow: 1px 0 rgb(0 0 0 / 15%);
    background: rgba(160,160,160,0.1);*/
    color: var(--primary-color);
}
.drawer-content li {
    border-radius: 0 24px 24px 0;
    margin: 0 10px 0 0;
    min-height: 48px;
    vertical-align: center;
    align-content: center;
    align-items: center;
    list-style: none;
}
.drawer-content ul li[aria-current=page] {
    border: solid 1px rgba(0, 255, 0, 3%);
    box-shadow: 1px 0 rgb(0 0 0 / 15%);
    background-color: rgba(127, 127, 127, 10%);
}
.drawer-content ul li[aria-current=page] i, .drawer-content ul li[aria-current=page] a {
    color: var(--primary-color);
}
.drawer-content li a {
    font-weight: 400;
    font-size: 100%;
    position: relative;
    display: block;
    padding: 11px 16px;
    text-decoration: none;
}
.drawer-content li a span.mdl-button__ripple-container {
    border-radius: 0 24px 24px 0;
}
.drawer-content li a i {
    width: 40px;
    opacity: 0.65;
}
.drawer-content li a span.title {
    padding-top: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.drawer-content ul li[aria-current=page] a {
    /*pointer-events: none;
    font-weight: bold;*/
}
.drawer-content ul li a div.summary {
    font-size: 95%;
    line-height: 150%;
    margin-top: 4px;
    margin-right: 32px;
    font-style: italic;
    font-weight: 400!important;
    font-family: 'Helvetica Neue', Helvetica, sans-serif;
    color: lightslategray;
}
.drawer-content label {
    display: block;
    margin-top: 16px;
    margin-bottom: 16px;
    margin-left: 12px;
    font-weight: bold;
    color: var(--primary-color);
}
.drawer-content a {
   color: #24333e;
}
[z-context="menu-drawer"]:focus {
    outline: none;
}


/* forms */
/* forms */

.button {
    cursor: pointer;
    display: flex;
    padding: 6px;
    height: 48px;
    margin: 6px;
    align-items: center;
    border-radius: 6px;
    background-color: #bbbbbb15;
    box-shadow: 0 1px 4px 0 #00000055;
}
.button:hover {
    background-color: #bbbbbb1a;
    box-shadow: 0 3px 8px 0 #00000055;
}
.theme-dark .button:hover {
    box-shadow: 0 0 6px 2px var(--dark-color-text);
}
.button:active {
    background-color: #bbbbbb26;
    box-shadow: 0 0 2px 0 #00000055;
}
.button[disabled] {
    cursor: not-allowed;
    opacity: 0.5;
    box-shadow: 0 0 0 0 #00000055;
}

.input-container {
    position: relative;
    margin-bottom: 25px;
}
.input-container label {
    position:absolute;
    top: 8px;
    left: 0;
    pointer-event: none!important;
    transition: all 0.15s ease-in-out;
}
.input-container input, input:not([type="checkbox"]):not([type="radio"]):not(.mdl-textfield__input) {
    z-index: 1;
    border:0;
    width: 100%;
    background: transparent;
    border-bottom: 1px solid;
    padding: 8px 0 5px 0;
}
.input-container input:focus, input:focus:not([type="checkbox"]):not([type="radio"]) {
    border: none;
    outline: none;
    border-bottom: 1px solid #bd0505;
}
.input-container input:focus ~ label,
.input-container input:valid ~ label {
    top: -14px;
    font-size: 80%;
    font-weight: bold;
}


[type=radio],
[type=checkbox] {
    -webkit-appearance: none;
    -moz-appearance:    none;
    appearance:         none;
    border: solid 1px;
}
[type=radio],
[type=checkbox] {
    width: 22px!important;
    height: 18px;
    margin-left: 6px;
    margin-right: 6px;
    position: relative;
    border: solid 1px;
    border-radius: 2px;
}
[type=radio]:checked::before,
[type=checkbox]:checked::before {
    content: "";
    width: 12px;
    height: 10px;
    position: absolute;
    top: 3px;
    left: 4px;
}
[type=radio],
[type=radio]:checked::before{
    border-radius: 100%;
}

:root {
    --lite-color: #fff;
    --lite-color-text: #000;
    --lite-nav-color: #007ca7;
    --lite-nav-color-text: #fff;
    --lite-color--accent: #e10c57;
    --lite-color--primary: #3954be;
    --lite-color--code: #005000;
    --lite-font--weigth: 400;

    --dark-color: #141414;
    --dark-color-text: #d2d2d2;
    --dark-nav-color: #741f3b; /* #014b76; */ /* #60142d; */
    --dark-nav-color-text: #ccc;
    --dark-color--accent: #f1c700;
    --dark-color--primary: #6ba64d;
    --dark-color--code: #8fc563;
    --dark-font--weigth: 400;
}

/*========================*\
      Theme 'lite'
\*========================*/

body{
    background-color: var(--lite-color);
    color: var(--lite-color-text);
    font-weight: var(--lite-font--weigth);
}
nav, footer {
    background-color: var(--lite-nav-color);
    color: var(--lite-nav-color-text);
    fill: var(--lite-nav-color-text);
    box-shadow: 0 4px 6px 0 rgb(0 0 0 / 20%), 0 -4px 12px 0 rgb(0 0 0 / 20%);
}
nav svg, .menu-button svg {
    fill:var(--lite-nav-color-text);
}
svg {
    fill:var(--lite-color-text);
}
nav a, footer a {
    color: var(--lite-nav-color-text);
}
a {
    color: var(--lite-color--accent);
    text-decoration: none;
}
main h1, main h2, main h3 {
    color: var(--lite-color--primary);
}
code:not([class*=language-]), pre:not([class*=language-]) {
    color: var(--lite-color--code);
}
.accent {
    color: var(--lite-color--accent);
    fill: var(--lite-color--accent);
}
.primary {
    color: var(--lite-color--primary);
    fill: var(--lite-color--primary);
}
.background {
    background-color: var(--lite-color);
}
.input-container input,  input {
  color: var(--lite-color-text);
  border-bottom-color: var(--lite-color--primary);
}
.input-container input:valid,  input:valid {
  border-bottom-color: var(--lite-color--primary)!important;
}

[type=radio]:checked::before,

[type=checkbox]:checked::before {
    background-color: var(--lite-color--accent);
}

[type=radio],

[type=checkbox] {
    border-color: var(--lite-color--primary);
}

button {
    color: var(--lite-color-text);
    fill: var(--lite-color-text);
}

/*========================*\
      Theme 'dark'
\*========================*/

body.theme-dark {
    background-color: var(--dark-color);
    color: var(--dark-color-text);
    font-weight: var(--dark-font--weigth);
}
.theme-dark nav, .theme-dark footer {
    background-color: var(--dark-nav-color);
    color: var(--dark-nav-color-text);
    fill: var(--dark-nav-color-text);
    box-shadow: 0 4px 6px 0 rgb(0 0 0 / 20%), 0 -4px 12px 0 rgb(0 0 0 / 20%);
}
.theme-dark nav svg, .theme-dark .menu-button svg {
    fill:var(--dark-nav-color-text);
}
.theme-dark svg {
    fill:var(--dark-color-text);
}
.theme-dark nav a, .theme-dark footer a {
    color: var(--dark-nav-color-text);
}
.theme-dark a {
    color: var(--dark-color--accent);
    text-decoration: none;
}
.theme-dark main h1, .theme-dark main h2, .theme-dark main h3 {
    color: var(--dark-color--primary);
}
.theme-dark code:not([class*=language-]), .theme-dark pre:not([class*=language-]) {
    color: var(--dark-color--code);
}
.theme-dark .accent {
    color: var(--dark-color--accent);
    fill: var(--dark-color--accent);
}
.theme-dark .primary {
    color: var(--dark-color--primary);
    fill: var(--dark-color--primary);
}
.theme-dark .background {
    background-color: var(--dark-color);
}
.theme-dark .input-container input, .theme-dark  input {
  color: var(--dark-color-text);
  border-bottom-color: var(--dark-color--primary);
}
.theme-dark .input-container input:valid, .theme-dark  input:valid {
  border-bottom-color: var(--dark-color--primary)!important;
}
.theme-dark 
[type=radio]:checked::before,
.theme-dark 
[type=checkbox]:checked::before {
    background-color: var(--dark-color--accent);
}
.theme-dark 
[type=radio],
.theme-dark 
[type=checkbox] {
    border-color: var(--dark-color--primary);
}
.theme-dark 
button {
    color: var(--dark-color-text);
    fill: var(--dark-color-text);
}

/*
---------------------------------
 */

.theme-toggle[type=checkbox] {
    margin: 0;
    --size: 32px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    outline: none;
    border: none;
    cursor: pointer;
    width: var(--size)!important;
    height: var(--size)!important;
    box-shadow: inset calc(var(--size) * 0.33) calc(var(--size) * -0.25) 0;
    border-radius: var(--size);
    transition: all 500ms;
    color: var(--lite-nav-color-text);
}
.theme-toggle[type=checkbox]:checked {
    --ray-size: calc(var(--size) * -0.4);
    --offset-orthogonal: calc(var(--size) * 0.65);
    --offset-diagonal: calc(var(--size) * 0.45);
    transform: scale(0.75);
    box-shadow: inset 0 0 0 var(--size),
        calc(var(--offset-orthogonal) * -1) 0 0 var(--ray-size),
        var(--offset-orthogonal) 0 0 var(--ray-size),
        0 calc(var(--offset-orthogonal) * -1) 0 var(--ray-size),
        0 var(--offset-orthogonal) 0 var(--ray-size),
        calc(var(--offset-diagonal) * -1) calc(var(--offset-diagonal) * -1) 0 var(--ray-size),
        var(--offset-diagonal) var(--offset-diagonal) 0 var(--ray-size),
        calc(var(--offset-diagonal) * -1) var(--offset-diagonal) 0 var(--ray-size),
        var(--offset-diagonal) calc(var(--offset-diagonal) * -1) 0 var(--ray-size);
    color: var(--dark-nav-color-text);
    background-color: transparent!important;
}
.theme-toggle[type=checkbox]:checked::before {
    background-color: transparent!important;
}

/* ----- MENU OVERLAY COMPONENT ----- */
[z-load*="/components/menu-overlay"] .circle-button {
    border: solid 1px var(--lite-color);
    background-color: var(--lite-nav-color)!important;
    fill: var(--lite-nav-color-text)!important;
}
.theme-dark [z-load*="/components/menu-overlay"] .circle-button {
    border: solid 1px var(--dark-color);
    background-color: var(--dark-nav-color)!important;
    fill: var(--dark-nav-color-text)!important;
}
.theme-dark [z-load*="/components/menu-overlay"] div[z-field="menu_overlay"] {
    background: radial-gradient(circle at bottom, black, #000000dd, #00000077, transparent)!important;
}

</style>

</head>


<!-- scroll helper is used to show/hide the header when scrolling -->
<body ctrl z-load="@lib/controllers/header-auto-hide" z-lazy="scroll"
      data-o-header="header" data-o-show-end="false" data-theme="indigo-deep_purple"
      layout="column stretch-stretch">

    <nav #header layout="row center-start">
        <div self="stretch" layout="row center-start">
            <button onclick="menuDrawer.open()" class="header-menu-button mdl-button mdl-button--icon">
                <i class="material-icons">menu_open</i>
            </button>
            <h1 self="size-x1" class="title">Widgets</h1>
        </div>
    </nav>


    <main layout="column top-center">

        
            <h1 #alt_header class="title">Widgets</h1>
        

        <div self="size-x1" class="content">
            <p>We've learned so far that automation programs, smart devices and services
are abstracted in HomeGenie as generic <em>modules</em>.
Depending on the type, a module can then be presented to the end-user in
the web interface with a different <em>widget</em>.</p>
<p>For example, to display a light dimmer module, the <em>dimmer</em> widget will
be used as it will be for all modules of the same type.</p>
<div class="media-container">
    <img _self_="size-small" src="images/widgets_dimmer_type.jpg" alt="" loading="lazy" />
</div>
<p>So, <em>widgets</em> are reusable UI components that are employed to display data
and information of a bound <em>module</em> and that may also contain some controls
(such as buttons, sliders, ...) for interacting with it.</p>
<p>Technically speaking a widget is made out of two piece of code:
one is the <em>HTML</em> code for the view, which so determine how the widget will
looks like in the user interface; the other is the <em>Javascript</em> code that
will determine actions to be taken upon user interaction or when a parameter
of the bound module is updated.</p>
<p>We'll now see how to explore, customize and create widgets by using
the integrated <em>Widget Editor</em>.</p>
<h2>Widget Editor</h2>
<p><em>Widget Editor</em> is accessible from the <strong>Configure → Automation</strong> menu.
The main page lists all widgets that are currently available in the system.
To edit an existing widget simply tap it from the list, while to create
a new one select the <strong><i class="material-icons">add_circle</i>Add widget</strong> option
from the <em>actions menu</em> located in the bottom-right corner.</p>
<div class="media-container">
    <img self="size-medium" src="images/widgets_editor_list.jpg" alt="" loading="lazy" />
</div>
<p>Widgets are identified by a 3 parts path consisting of <code>brand</code>/<code>category</code>/<code>name</code>.
For example the <em>light dimmer</em> widget is identified by <code>homegenie</code>/<code>generic</code>/<code>dimmer</code>:</p>
<ul>
<li><strong>brand:</strong> <em>homegenie</em> <strong>category:</strong> <em>generic</em> <strong>name:</strong> <em>dimmer</em></li>
</ul>
<p>When editing a widget we can see two panels. One is the code editor that can
be switched from HTML to Javascript, while the other one is the preview
panel where the widget is actually displayed and that we can use to
test its functionality.</p>
<div class="media-container" data-ui-load="@lib/controllers/view_pager"
    data-o-slide="true" data-o-paging="true">
    <img self="size-medium" src="images/widgets_editor_html.jpg" alt="" loading="lazy">
    <img self="size-medium" src="images/widgets_editor_js.jpg" alt="" loading="lazy">
    <!--img self="size-medium" src="images/widgets_editor_params.jpg" alt="" loading="lazy"-->
</div>
<p>In order to test the widget we first have to choose a module to bind to
from the select menu right above the preview.
We can also simulate the change of a module parameter, to see how the
widget reacts, by clicking the <strong><i class="material-icons">menu</i></strong>
button that is located next to the bound module select menu.</p>
<h3>The View - HTML</h3>
<p>When designing the widget's <em>View</em> a few guide-lines have to be considered:</p>
<ul>
<li>never use the <code>id</code> attribute for elements that have to be referenced in
the <em>Javascript</em> code; use the <code>data-ui-field</code> attribute instead</li>
<li>prefer the use of <em>CSS</em> classes provided by <em>HG UI</em>, which are <a href="https://api.jquerymobile.com/classes/">jQuery Mobile's CSS classes</a>
and the ones defined by standard <a href="https://github.com/genielabs/HomeGenie/blob/master/BaseFiles/Common/html/css/my.css#L265">HG's CSS file</a></li>
<li>since <em>HG UI</em> is based on <a href="http://jquerymobile.com/">jQuery Mobile</a>,
prefer using this framework instead of plain HTML; there are a couple of
other frameworks/plugins that can also be used next to <a href="http://jquerymobile.com/">jQuery Mobile</a>
and that are listed at the end of this page</li>
</ul>
<p>While editing the HTML code, to update the widget preview hit <code>CTRL+S</code>
keys or press the <strong><i class="material-icons">check_circle</i>Run/Preview</strong> button.</p>
<h4>Example - HTML code for a basic widget container</h4>
<pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- main widget container --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-ui-field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>widget<span class="token punctuation">"</span></span><br>     <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui-overlay-shadow ui-corner-all ui-body-inherit hg-widget-a<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>     <span class="token comment">&lt;!-- widget content begin --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Simple widget with a button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-ui-field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ui-btn<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><br>    Status: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">data-ui-field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>     <span class="token comment">&lt;!-- widget content end --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<h3>The Controller - Javascript</h3>
<p>The <em>Javascript</em> code takes care of updating the data displayed in the
widget's view and also of sending proper commands when the user presses
buttons and other controls that might be implemented in it.</p>
<p>In this <em>Javascript</em> code, the <code>$$</code> object is the widget instance
object that is used to implement the widget life-cycle and that holds
other properties and objects used in the widget context, such as the
bound module and some utility methods to handle most common tasks.</p>
<p>The following is the <em>Javascript</em> code skeleton required to implement the
widget life's cycle:s</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// this field is used to provide infos about the widget</span><br>$$<span class="token punctuation">.</span>widget <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">name</span>   <span class="token operator">:</span> <span class="token string">'Simple widget'</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'1.0'</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">author</span> <span class="token operator">:</span> <span class="token string">'Foo Bar'</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">release</span><span class="token operator">:</span> <span class="token string">'2016-05-06'</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">icon</span>   <span class="token operator">:</span> <span class="token string">'path/to/some/icon/image.png'</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// called after the widget is loaded</span><br>$$<span class="token punctuation">.</span><span class="token function-variable function">onStart</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// called each time the UI needs to be fully updated</span><br>$$<span class="token punctuation">.</span><span class="token function-variable function">onRefresh</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// called each time a parameter of the bound module is updated</span><br>$$<span class="token punctuation">.</span><span class="token function-variable function">onUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parameter<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// called when the widget is requested to stop/dispose</span><br>$$<span class="token punctuation">.</span><span class="token function-variable function">onStop</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span></code></pre>
<p>Other objects and properties available through the <code>$$</code> object are:</p>
<h4><code>$$.field(...)</code></h4>
<p>This method is used to get the <em>jQuery</em> object for the widget's element
having the <code>data-ui-field</code> attribute set to the given <code>&lt;field_name&gt;</code>.</p>
<p><strong>Syntax</strong></p>
<pre class="language-javascript"><code class="language-javascript">$$<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">'&lt;field_name>'</span><span class="token punctuation">)</span></code></pre>
<p><strong>Example</strong></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// use of $$.field in the onStart method to register</span><br><span class="token comment">// the click event handler for the button 'test-btn'</span><br><span class="token comment">// (see the HTML code in the previous example)</span><br>$$<span class="token punctuation">.</span><span class="token function-variable function">onStart</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// button click handler</span><br>  $$<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">'text-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    $$<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'button clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h4><code>$$.module</code></h4>
<p>Returns the module object bound to the widget.</p>
<p><strong>Module Properties</strong> (example instance)</p>
<pre class="language-javascript"><code class="language-javascript">$$<span class="token punctuation">.</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">Domain</span><span class="token operator">:</span> <span class="token string">"HomeAutomation.PhilipsHue"</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">Address</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">"Porch Light"</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">Description</span><span class="token operator">:</span> <span class="token string">"module description"</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">DeviceType</span><span class="token operator">:</span> <span class="token string">"Dimmer"</span><br><span class="token punctuation">}</span></code></pre>
<p><strong>Module Methods</strong></p>
<ul>
<li><code>$$.module.prop('&lt;name&gt;')</code><br/>
Gets the module's property specified by <code>&lt;name&gt;</code>.<br/>
<strong>Example</strong></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> level <span class="token operator">=</span> $$<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'Status.Level'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>level <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Module level:'</span><span class="token punctuation">,</span> level<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'     updated:'</span><span class="token punctuation">,</span> level<span class="token punctuation">.</span>UpdateTime<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<ul>
<li><code>$$.module.command('&lt;api_command&gt;', '&lt;options&gt;', &lt;callback_fn&gt;)</code><br/>
Invokes the given <code>&lt;api_command&gt;</code> on the module.<br/>
<strong>Example</strong></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// turn off the module</span><br>$$<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'Control.Off'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// set dimmer level to 50%</span><br>$$<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'Control.Level'</span><span class="token punctuation">,</span> <span class="token string">'50'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'command response:'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4><code>$$.apiCall(...)</code></h4>
<p>Invokes a <a href="api/mig/overview.html" target="_blank">Web API</a> method.</p>
<p><strong>Syntax</strong></p>
<pre class="language-javascript"><code class="language-javascript">$$<span class="token punctuation">.</span><span class="token function">apiCall</span><span class="token punctuation">(</span><span class="token string">'&lt;api_method>'</span><span class="token punctuation">,</span><br>           <span class="token string">'&lt;domain>'</span><span class="token punctuation">,</span><br>           <span class="token string">'&lt;address>'</span><span class="token punctuation">,</span><br>           <span class="token string">'&lt;method_options>'</span><span class="token punctuation">,</span><br>           <span class="token operator">&lt;</span>callback_fn<span class="token operator">></span><span class="token punctuation">)</span></code></pre>
<p><strong>Example</strong></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// TODO: add some examples</span></code></pre>
<p>...</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/*<br># Quick-Reference for other methods/properties<br># exposed by '$$' object<br><br> Get the jQuery element in the main document<br>   $$.field('&lt;document_tree_selector>', true)<br><br> Shorthand for HG.Ui<br>   $$.ui<br><br> Shorthand for HG.WebApp.Utility<br>   $$.util<br><br> Shorthand for HG.WebApp.Locales<br>   $$.locales<br><br> Blink a widget field and the status led image (if present)<br>   $$.signalActity('&lt;widget_field_name>')<br><br>*/</span></code></pre>
<h3>Old widget version</h3>
<p>The <em>Javascript</em> code implementation discussed so far is the recommended
way for writing a widget's controller and it is called <strong>v2</strong>.
Anyway there are still a few widgets that might use an old way for writing
the widget's controller.</p>
<p>This old version of widget's controller, which is called <strong>v1</strong>, is
implemented as a JSON object that is formatted as shown in the example
below:</p>
<h4>Example - Minimal javascript code for v1 widgets</h4>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token punctuation">{</span><br>  <span class="token comment">// use this field to assign a default image to the widget</span><br>  <span class="token literal-property property">IconImage</span><span class="token operator">:</span> <span class="token string">'pages/control/widgets/homegenie/generic/images/icons/robot.png'</span><span class="token punctuation">,</span><br><br>  <span class="token comment">// this field is used for initializing the widget once loaded</span><br>  <span class="token literal-property property">Initialized</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br><br>  <span class="token comment">// this method is called each time the module bound to this widget is updated</span><br>  <span class="token comment">// put here the code for displaying module's data</span><br>  <span class="token function-variable function">RenderView</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cuid<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> container <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>cuid<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> widget <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'[data-ui-field=widget]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> button <span class="token operator">=</span> widget<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'[data-ui-field=test-btn]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> name <span class="token operator">=</span> widget<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'[data-ui-field=name]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>Initialized<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>Initialized <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>        <span class="token comment">// register widget's event handlers</span><br>        button<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> ButtonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    name<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>  <span class="token function-variable function">ButtonClicked</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// handler for the button click event here</span><br>    <span class="token comment">// this will make an API request in most cases</span><br>    <span class="token comment">// using jQuery</span><br>    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/'</span><span class="token operator">+</span>module<span class="token punctuation">.</span>Domain<span class="token operator">+</span><span class="token string">'/'</span><span class="token operator">+</span>module<span class="token punctuation">.</span>Address<span class="token operator">+</span><span class="token string">'/Control.On'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>        <span class="token comment">// request completed....</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token comment">// or alternatively use HG Javascript API</span><br>    <span class="token comment">// (see the table below for more HG Javascript API examples)</span><br>    <span class="token keyword">var</span> ctrl <span class="token operator">=</span> <span class="token constant">HG</span><span class="token punctuation">.</span>Control<span class="token punctuation">.</span>Modules<span class="token punctuation">;</span><br>    ctrl<span class="token punctuation">.</span><span class="token function">ApiCall</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>Domain<span class="token punctuation">,</span> module<span class="token punctuation">.</span>Address<span class="token punctuation">,</span> <span class="token string">'Control.On'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>        <span class="token comment">// request completed...</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre>
<p>The only mandatory fields in the Javascript code of a <em>v1</em> widget are
<em>IconImage</em> and <em>RenderView</em>:</p>
<ul>
<li><strong>IconImage</strong> is the image used to identify the widget in the <em>UI</em>. See
<a href="https://github.com/genielabs/HomeGenie/tree/master/BaseFiles/Common/html/pages/control/widgets/homegenie/generic/images">List of HG UI icons</a>.</li>
<li><strong>RenderView</strong> is a function that <em>HG UI</em> will call everytime the
bound module is updated, passing to it the parameter <code>cuid</code>, which is the
<strong>id</strong> attribute of the widget's container and the <code>module</code> parameter,
which is a reference to the bound module.<br/>
The <code>module</code> object has the following property fields: <code>Domain</code>, <code>Address</code>,
<code>Name</code>, <code>Description</code>, <code>Properties</code>.</li>
</ul>
<p>As shown in the <em>ButtonClicked</em> handler, in most cases, when the user
click a widget control, an API request is made. The end-point of the
request will be usually an automation program that is listening
to API calls for that module domain.</p>
<p>Prefer using <strong>v2</strong> implementation since the <strong>v1</strong> implementation might
be deprecated at some point.</p>
<p>Both <em>v1</em> and <em>v2</em> widgets can use <em>HG Javascript API</em>.</p>
<h4>HG Javascript API - Common functions</h4>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// use the "Utility" namespace</span><br><span class="token keyword">var</span> utils <span class="token operator">=</span> <span class="token constant">HG</span><span class="token punctuation">.</span>WebApp<span class="token punctuation">.</span>Utility<span class="token punctuation">;</span><br><br><span class="token comment">// get a reference to a module by a given &lt;domain> and &lt;address></span><br><span class="token keyword">var</span> mod <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">GetModuleByDomainAddress</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// get a module parameter by name</span><br><span class="token keyword">var</span> level <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">GetModulePropertyByName</span><span class="token punctuation">(</span>mod<span class="token punctuation">,</span> <span class="token string">'Status.Level'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Module name = '</span> <span class="token operator">+</span> mod<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">' Status.Level = '</span> <span class="token operator">+</span> level<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// show a confirmation request popup</span><br>utils<span class="token punctuation">.</span><span class="token function">ConfirmPopup</span><span class="token punctuation">(</span><span class="token string">'Delete item'</span><span class="token punctuation">,</span> <span class="token string">'Are you sure?'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">confirmed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>confirmed<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// the action was confirmed...</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token comment">// action canceled</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// format a date</span><br><span class="token keyword">var</span> today <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">FormatDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// format a date with time</span><br><span class="token keyword">var</span> todayTime <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">FormatDateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// use the "Control" namespace</span><br><span class="token keyword">var</span> control <span class="token operator">=</span> <span class="token constant">HG</span><span class="token punctuation">.</span>Control<span class="token punctuation">.</span>Modules<span class="token punctuation">;</span><br><br><span class="token comment">// call HG API function</span><br>control<span class="token punctuation">.</span><span class="token function">ApiCall</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> address<span class="token punctuation">,</span> command<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token comment">// handle response here...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// use the "Programs" namespace</span><br><span class="token keyword">var</span> progs <span class="token operator">=</span> <span class="token constant">HG</span><span class="token punctuation">.</span>Automation<span class="token punctuation">.</span>Programs<span class="token punctuation">;</span><br><br><span class="token comment">// Run a program</span><br>progs<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>programId<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token function">fuction</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token comment">// handle response here...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>HomeGenie Javascript API</h2>
<p>See <a href="https://github.com/genielabs/HomeGenie/tree/master/BaseFiles/Common/html/js/api">HG Javascript API on github</a> for a complete
list of available namespaces and commands.</p>
<h2>Frameworks and Plugins</h2>
<p>The following is a list of framework/plugins that can be used in a widget.</p>
<h3>Base Frameworks</h3>
<ul>
<li><a href="https://jquery.com/">jQuery</a></li>
<li><a href="https://jquerymobile.com/">jQuery Mobile</a></li>
</ul>
<h3>UI Controls</h3>
<ul>
<li><a href="https://jweir.github.io/colorwheel/">ColorWheel</a></li>
<li><a href="https://anthonyterrien.com/knob/">jQuery Knob</a></li>
<li><a href="https://github.com/jtsage/jtsage-datebox/tree/486bd2314cd6c32a2380ba37dbb0a6600315505b">jQM Datebox</a></li>
</ul>
<h3>Notification / Tooltip</h3>
<ul>
<li><a href="https://github.com/qTip2/qTip2">qTip</a></li>
<li><a href="https://github.com/ehynds/jquery-notify">jQuery UI Notify Widget</a></li>
</ul>
<h3>Graphics / Custom controls</h3>
<ul>
<li><a href="https://flotcharts.org/">Flot</a></li>
<li><a href="https://raphaeljs.com/">RaphaelJs</a></li>
</ul>
<h3>Utility</h3>
<ul>
<li><a href="https://momentjs.com/">Moment.js</a></li>
<li><a href="https://github.com/andris9/jStorage">jStorage</a></li>
</ul>

            

    
    

    <div layout="rows center-spread" style="margin-top: 112px; gap:12px; margin-bottom: 32px; padding-left: 8px; padding-right: 8px; font-size: 140%">

        
        <a href="/content/devs/programs/" style="text-align: center">
            <div layout="row center-center">
                <i class="material-icons">arrow_left</i>&nbsp;
                <span style="padding-right: 24px">Previous</span>
            </div>
            <div class="navigation-title">Programs (APP)</div>
        </a>
        

        
        <a href="." style="text-align: center">
            <div layout="row center-center">
                <span style="padding-left: 24px">Next</span>
                <i class="material-icons">arrow_right</i>&nbsp;
            </div>
            <div class="navigation-title">Program API</div>
        </a>
        

    </div>
    <style>
        .navigation-image {
            border-radius: 32px;
            border-color: rgba(100,200,200,0.5);
        }
        .navigation-title {
            color: var(--primary-color);
            margin: 8px;
            font-size: 80%;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>



        </div>

        
<footer self="size-large" layout="columns bottom-center" style="min-height: 120px">

    <div self="size-large" layout="rows center-justify" style="padding: 24px;">

        <div self="left">
            <a href="/feed/rss.xml" layout="row center-left" style="gap: 8px">
                <img src="/images/rss-feed.png" width="24" height="24">
                <strong>RSS feed</strong>
            </a>
        </div>

        <div>
            powered by <a href="https://zuixjs.org"><strong>zuix.js</strong></a>
        </div>

    </div>

</footer>



    </main>


    <!-- Navigation Drawer -->
    <div #drawer ctrl z-load="@lib/controllers/drawer-layout"
         z-context="menu-drawer" z-lazy="false"
         z-options="drawer_opts"
         class="drawer-layout no-select visible-on-ready"
         layout="column top-stretch">
        <!-- Navigation Drawer content -->

        <!-- Header -->
        <div class="drawer-header" layout="column justify-center">
            <a href="/" title="Home" class="title">
                <img alt="HomeGenie" src="/images/homegenie-text-logo.svg">
            </a>
            <div class="subtitle">Programmable smart home server.</div>
        </div>

        <!-- Menu items and other content -->
        <div class="drawer-content" self="size-x1">
            <ul>
    
            <li >
                <a href="/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">info_outline</i>
                        <span class="title">Introduction</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li >
                <a href="/content/getting-started/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">build</i>
                        <span class="title">Get started</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li >
                <a href="/content/clients/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">important_devices</i>
                        <span class="title">Clients</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li></ul>



        <label>Documentation</label>
        <ul>
            
            <li >
                <a href="/content/docs/setup/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">settings</i>
                        <span class="title">Setup</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/configure/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">tune</i>
                        <span class="title">Configuration</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/scenarios/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">tips_and_updates</i>
                        <span class="title">Scenarios</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/remotes/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">settings_remote</i>
                        <span class="title">IR/RF remotes</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/scheduling/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">schedule</i>
                        <span class="title">Scheduling</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/upnp_dlna/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">perm_media</i>
                        <span class="title">UPnP / DLNA</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li >
                <a href="/content/docs/interconnect/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">lan</i>
                        <span class="title">Interconnections</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            </ul>

    


        <label>Developing</label>
        <ul>
            
            <li >
                <a href="/content/devs/programs/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">extension</i>
                        <span class="title">Programs (APP)</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li  aria-current="page">
                <a href="/content/devs/widgets/" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">widgets</i>
                        <span class="title">Widgets</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            
            <li>
                <a href="/api/ape/annotated.html" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">emoji_nature</i>
                        <span class="title">Program API</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li>
            <li>
                <a href="/api/mig/overview.html" class="mdl-js-ripple-effect">
                    <div layout="row center-left">
                        <i class="material-icons">emoji_nature</i>
                        <span class="title">Web API</span>
                    </div>
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span>
                </a>
            </li></ul>

    

<!--
<ul>
    <li >
        <a href="/search" class="mdl-js-ripple-effect">
            <div layout="row center-left">
                <i class="material-icons">search</i>
                <span>Search</span>
            </div>
            <span class="mdl-button__ripple-container" draggable="false"><span class="mdl-ripple"></span></span>
        </a>
    </li>
</ul>
-->

        </div>

    </div>






<!-- Built with love using zUIx Web Starter -->

<script>

  // Google Analytics: change UA-40902095-1 to be your site's ID
  if (location.hostname !== "localhost" && location.hostname !== "127.0.0.1") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-40902095-1', 'auto');
    ga('send', 'pageview');
  }

</script>



</body>

<!-- page script -->
<script>
/** type {ComponentContext} */
let menuDrawer;
window.drawer_opts = {
  autoHideWidth: 1280,
  on: {
    'drawer:open': function() {
      /* ... */
    },
    'drawer:close': function() {
      /* ... */
    }
  },
  ready: function() {
    menuDrawer = this;
    menuDrawer.$.playAnimation(['animate__fadeIn', enterAnimation]);
    // TODO: work-around to very initial rendering occasionally not showing cards
    setTimeout(zuix.componentize, 300);
  }
};

function scrollbarVisible(element) {
  const r = element.getBoundingClientRect();
  return r.bottom !== r.height;
}

function processExternalLinks(view) {
    // Force opening of all non-local links in a new window
    zuix.$(view).find('a[href*="://"]')
        .attr('target', '_blank')
        .attr('rel', 'noreferrer');
}
zuix.hook('view:process', function(view) {
    processExternalLinks(view);
});
processExternalLinks(document);



// add presentation anim to the drawer
const referrerLink = document.createElement('a');
referrerLink.href = document.referrer;
const enterAnimation =
  (referrerLink.pathname === '/') ?
    'animate__fadeInLeft' : 'animate__fadeIn';

// smooth scroll for local anchors
function navigateTo(anchor) {
  const target = zuix.$.find('a[name="' + anchor + '"]');
  zuix.context(document.body).scroll
          .scrollTo(target, 500);
}



</script>


</html>

